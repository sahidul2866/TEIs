<div class="equation-editor-container">
  <!-- Equation Display -->
  <div class="equation-display mb-6">
    <label class="block text-sm font-medium text-gray-700 mb-2">Your Equation:</label>
    <div class="relative">
      <input
        type="text"
        [(ngModel)]="currentEquation"
        (input)="onDirectInput($event)"
        (click)="onCursorChange($event)"
        (keyup)="onCursorChange($event)"
        class="w-full px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors font-mono"
        placeholder="Enter your equation here..."
        readonly="false">
      <div class="absolute top-2 right-2 text-sm text-gray-500">
        Position: {{ cursorPosition }}
      </div>
    </div>
  </div>

  <!-- Button Panels -->
  <div class="button-panels grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Numbers -->
    <div class="panel">
      <h3 class="text-lg font-semibold text-gray-800 mb-3">Numbers</h3>
      <div class="grid grid-cols-3 gap-2">
        <button 
          *ngFor="let number of getNumberButtons()"
          (click)="insertNumber(number)"
          class="btn btn-number">
          {{ number }}
        </button>
      </div>
    </div>

    <!-- Variables -->
    <div class="panel">
      <h3 class="text-lg font-semibold text-gray-800 mb-3">Variables</h3>
      <div class="grid grid-cols-2 gap-2">
        <button 
          *ngFor="let variable of variables"
          (click)="insertVariable(variable)"
          class="btn btn-variable">
          {{ variable }}
        </button>
      </div>
    </div>

    <!-- Operators -->
    <div class="panel">
      <h3 class="text-lg font-semibold text-gray-800 mb-3">Operators</h3>
      <div class="grid grid-cols-2 gap-2">
        <button 
          *ngFor="let operator of operators"
          (click)="insertOperator(operator)"
          class="btn btn-operator">
          {{ operator }}
        </button>
      </div>
    </div>

    <!-- Functions & Parentheses -->
    <div class="panel">
      <h3 class="text-lg font-semibold text-gray-800 mb-3">Functions</h3>
      <div class="grid grid-cols-2 gap-2">
        <button (click)="insertParenthesis('(')" class="btn btn-function">(</button>
        <button (click)="insertParenthesis(')')" class="btn btn-function">)</button>
        <button (click)="insertFunction('sin')" class="btn btn-function">sin</button>
        <button (click)="insertFunction('cos')" class="btn btn-function">cos</button>
        <button (click)="insertFunction('log')" class="btn btn-function">log</button>
        <button (click)="insertFunction('sqrt')" class="btn btn-function">âˆš</button>
      </div>
    </div>
  </div>

  <!-- Control Buttons -->
  <div class="control-buttons flex justify-center space-x-4 mt-6">
    <button 
      (click)="backspace()"
      class="btn btn-control bg-yellow-500 hover:bg-yellow-600 text-white">
      <i class="fas fa-backspace mr-2"></i>
      Backspace
    </button>
    <button 
      (click)="clearEquation()"
      class="btn btn-control bg-red-500 hover:bg-red-600 text-white">
      <i class="fas fa-trash mr-2"></i>
      Clear
    </button>
  </div>

  <!-- Preview -->
  <div class="equation-preview mt-6 p-4 bg-gray-50 rounded-lg">
    <h3 class="text-lg font-semibold text-gray-800 mb-2">Preview:</h3>
    <div class="text-2xl font-mono text-center py-4 bg-white rounded border">
      {{ currentEquation || 'No equation entered' }}
    </div>
  </div>

  <!-- Instructions -->
  <div class="instructions bg-purple-50 p-4 rounded-lg mt-6">
    <i class="fas fa-calculator text-purple-600 mr-2"></i>
    <span class="text-purple-800">Use the buttons above to build your equation, or type directly in the input field.</span>
  </div>
</div>
